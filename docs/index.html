<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h2>EmonCMS Devices App - Pair your new device</h2>
<p><a href="https://github.com/emrysr/devices">EmonCMS devices</a> create wifi hotspots when not connected. Once connected to these hotspots you can configure the device to connect to your local wifi connection.</p>
<p>This app will discover these hotspots and connect your device to your wifi without manual configuration.</p>
<p>You can sign into your dashboard to allow your device to be controlled online as well as locally.</p>
<p>Written with <a href="https://cordova.apache.org/">Apache Cordova</a> - works on multiple devices, however main development done one Android 9. Other devices and versions should be compatible with this Cordova App.</p>
<blockquote>
<p>:information_source: If any issues found running the app on iPhones please create a <a href="https://github.com/emrysr/devices/issues">github issue</a> :bug: to track problems and fixes</p>
</blockquote>
<hr>
<h2>Screenshots</h2>
<p>Screenshots of the web based <a href="https://dashboard.energylocal.org.uk">Energy Local Dashboard</a> and this App running on Android</p>
<blockquote>
<p>:link: You can control your device using your <a href="https://dashboard.energylocal.org.uk">Energy Local Dashboard</a> account</p>
</blockquote>
<table>
    <tr>
        <td>
            <a href="dashboard-screenshot.png?raw=true" alt="Dashbaord Screenshot">
                <img src="dashboard-screenshot.png?raw=true" width="450" alt="Screenshot of Dashboard">
            </a>
            <br>
            <em>Dashboard showing device synced with the <a href="https://octopus.energy/agile/">Octopus Agile tariff</a> pricing</em>
        </td>
        <td>
            <a href="app-screenshot.png?raw=true" alt="App Screenshot">
                <img src="app-screenshot.png?raw=true" width="217" alt="Screenshot of App">
            </a>
            <br>
            <em>App showing discovered devices</em>
        </td>
    </tr>
</table>
<hr>
<h2>Quick run</h2>
<blockquote>
<p>If Cordova not installed... <code>$ sudo npm install -g cordova</code></p>
</blockquote>
<pre class="prettyprint source lang-bash"><code>$ git clone https://github.com/emrysr/devices.git && cd devices
$ cordova platform add android
$ npm install
$ cordova run android --device
</code></pre>
<h2>Required Cordova plugins</h2>
<pre class="prettyprint source lang-bash"><code>$ cordova plugin add cordova-plugin-zeroconf
$ cordova plugin add https://github.com/tripflex/wifiwizard2
$ cordova plugin add cordova-plugin-advanced-http
$ cordova plugin add cordova-plugin-inappbrowser
$ cordova plugin add cordova-plugin-device
$ cordova plugin add cordova-plugin-network-information
</code></pre>
<p>or as one liner...</p>
<pre class="prettyprint source lang-bash"><code>$ cordova plugin add cordova-plugin-zeroconf https://github.com/tripflex/wifiwizard2 cordova-plugin-advanced-http cordova-plugin-inappbrowser cordova-plugin-device cordova-plugin-network-information
</code></pre>
<hr>
<h2>Compling Problems</h2>
<p>You may have problems compiling, try to remove then add the cordova platform to fix this:</p>
<pre class="prettyprint source lang-bash"><code>$ cordova platform remove android
$ cordova platform add android
</code></pre>
<p>or remove the whole <code>platform</code> directory and re-add:</p>
<pre class="prettyprint source lang-bash"><code>$ rm -rf platforms && cordova platform add android
</code></pre>
<blockquote>
<p><strong>âš  NOTE</strong> : The Cordova plugins will also need to be re-installed once you remove a platform</p>
</blockquote>
<h2>Github issue tracker</h2>
<p>If you find any issues please add a new entry onto the github repo's issue tracker. Thanks</p>
<blockquote>
<p>:link: We use <strong><a href="https://github.com/emrysr/devices/issues">Github issues</a></strong> to track issues and create fixes.</p>
</blockquote>
<hr>
<h2>Documentation</h2>
<h3>code documentation (jsdoc)</h3>
<p>The code comments have been used to document the code using jsdoc in the <code>/docs</code> directory</p>
<p>Changes to comments in <code>www/js/index.js</code> or the <code>README.md</code> can be automatically shown in the documentation by using jsdoc</p>
<pre class="prettyprint source lang-bash"><code>$ jsdoc www/js/index.js README.md -d docs
</code></pre>
<p>The hosted github pages version is here: http://code.emrys.cymru/devices/</p>
<hr>
<h1>Debugging</h1>
<h2>VS Code specific debugging</h2>
<p>You can debug running Cordova apps using the vscode debug tools. The web browser based simulator expects responses when the app uses any plugin api.
I've created a <a href="https://github.com/emrysr/devices/blob/master/README-vscode-debugging.md">list of example responses</a> for you to use during debugging.</p>
<blockquote>
<p>there more details on vscode setup in the <a href="https://github.com/emrysr/wifiscan#using-vscode">wifi-scan</a> repo I based this work on</p>
</blockquote>
<h2>adb (Android Debug Bridge)</h2>
<p>you can interrogate the connected device's activity log (and filter by specific tags) using the <code>logcat</code> and <code>grep</code> commands</p>
<pre class="prettyprint source"><code>adb logcat -v tag | grep -i -e 'connectivityservice\|wifiwizard2\|WifiService\|ssid\|wifi'
</code></pre>
<blockquote>
<p>this works for any android device connected (in developer mode with usb debugging turned on)</p>
</blockquote>
<h2>Android Studio</h2>
<p>Android studio has a feature where you can connect to and read from a device's log. Was not done as part of my development work.</p>
<hr>
<h2>Scripts to scan local network devices</h2>
<h3>Avahi Utils</h3>
<blockquote>
<p>&quot;...service discovery on a local network via the mDNS/DNS-SD protocol suite...&quot;</p>
</blockquote>
<p>This is used to find devices on the network</p>
<h4>Install it with:</h4>
<pre class="prettyprint source lang-bash"><code>$ sudo apt install avahi-utils
</code></pre>
<h4>Scan your network:</h4>
<pre class="prettyprint source lang-bash"><code>$ avahi-browse -a
</code></pre>
<h4>Simulate a device on the network.</h4>
<p>the paramerters are:
<code>name</code>, <code>type</code>, <code>port</code>, <code>TXT</code></p>
<pre class="prettyprint source lang-bash"><code>$ avahi-publish-service &quot;Dev Laptop&quot; _http._tcp. 80 v=10.2.0 platform=emoncms path=/emoncms
</code></pre>
<hr>
<h1>todo</h1>
<ul>
<li>translation - i18n label placeholders and translations</li>
</ul></article>
    </section>









<section>

<header>
    
        <h2>index.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Mobile app that scans the local network for device. Connects to new device hotspot and pairs it. Adds the device to the user's online dashboard.</div>
        

        


<dl class="details">

    
    <dt class="tag-version">Version:</dt>
    <dd class="tag-version"><ul class="dummy"><li>0.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li><a href="mailto:emrys@openenergymonitor.org.uk">Emrys Roberts</a></li>
        </ul>
    </dd>
    

    
    <dt class="tag-copyright">Copyright:</dt>
    <dd class="tag-copyright"><ul class="dummy"><li>EmonCMS 2020 <a href="https://raw.githubusercontent.com/emrysr/devices/master/COPYRIGHT.txt">COPYRIGHT.txt</a></li></ul></dd>
    

    
    <dt class="tag-license">License:</dt>
    <dd class="tag-license"><ul class="dummy"><li>AGPL-3.0-or-later <a href="https://raw.githubusercontent.com/emrysr/devices/master/LICENSE.txt">LICENSE.txt</a></li></ul></dd>
    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="http://openenergymonitor.org">OpenEnergyMonitor project</a></li>
        </ul>
    </dd>
    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="App.html">App</a></li><li><a href="controller.html">controller</a></li><li><a href="Devices.html">Devices</a></li><li><a href="logger.html">logger</a></li><li><a href="view.html">view</a></li><li><a href="Wifi.html">Wifi</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_SETTINGS">_SETTINGS</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Mon Sep 21 2020 23:12:10 GMT+0100 (Amser Haf Prydain)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>